const { Markup } = require('telegraf');

module.exports = (bot) => {
    bot.command('start', async (ctx) => {
        const param = ctx.message.text.split(' ')[1];
        
        if (param?.startsWith('crypto_success_')) {
            const userId = param.split('_')[2];
            if (ctx.from.id.toString() === userId) {
                await ctx.reply('–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π! –í–∞—à VPN –∫–ª—é—á –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ –º–∏–Ω—É—Ç—ã.');
                return;
            }
        }
        
        if (param === 'payment_success') {
            await ctx.reply('–°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É! –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏—è VPN –∫–ª—é—á–∞.');
            return;
        }
        
        if (param === 'payment_fail') {
            await ctx.reply('–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –æ–ø–ª–∞—Ç–∞ –Ω–µ –ø—Ä–æ—à–ª–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.');
            return;
        }

        // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ
        await ctx.reply(
            'üé£ –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ ZeusVPN\n\n' +
            'üéÅ –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –ø–æ–¥–ø–∏—Å–∫—É:\n' +
            'üöÄ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫\n' +
            '‚ö° –í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å\n' +
            'üì± –î–æ—Å—Ç—É–ø —Å–æ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤\n' +
            'üõ° –ù–∞–¥–µ–∂–Ω–∞—è –∑–∞—â–∏—Ç–∞\n' +
            'üåø –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞\n\n' +
            'üíé –°—Ç–æ–∏–º–æ—Å—Ç—å: 100‚ÇΩ/–º–µ—Å—è—Ü\n\n' +
            'üí≥ –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:\n' +
            '‚Ä¢ –ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞\n' +
            '‚Ä¢ –°–ë–ü\n' +
            '‚Ä¢ –ÆMoney',
            Markup.keyboard([
                ['üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π'],
                ['üè¶ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –°–ë–ü'],
                ['üí∞ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –ÆMoney'],
                ['‚óÄÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é']
            ]).resize()
        );
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ"
    bot.hears('üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ', async (ctx) => {
        await ctx.reply(
            'üìñ –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É\n–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ:',
            Markup.keyboard([
                ['üì± Android'],
                ['üçé iOS/iPhone'],
                ['ü™ü Windows'],
                ['üêß Linux'],
                ['üçè macOS'],
                ['‚óÄÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é']
            ]).resize()
        );
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –û–°
    bot.hears('üì± Android', async (ctx) => {
        await ctx.reply('–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Android...');
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Android
    });

    bot.hears('üçé iOS/iPhone', async (ctx) => {
        await ctx.reply('–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è iOS...');
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è iOS
    });

    // ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö –û–°

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á"
    bot.hears('üîë –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á', async (ctx) => {
        // –ó–¥–µ—Å—å –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–∞
        await ctx.reply(
            'üîë –í–∞—à –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –≥–æ—Ç–æ–≤!\n\n' +
            '–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Outline:\n\n' +
            'ss://Y2hhY2hhMjAtaWV0Zi1wb2x5MTMwNTpwYXNzd29yZA@example.com:3000/?outline=1'
        );
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é"
    bot.hears('‚óÄÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é', async (ctx) => {
        await ctx.reply(
            'üåü –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é',
            Markup.keyboard([
                ['üé£ –ö—É–ø–∏—Ç—å ZeusVPN - 100‚ÇΩ/–º–µ—Å—è—Ü'],
                ['üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ'],
                ['üì¶ –ú–æ–∏ –∫–ª—é—á–∏']
            ]).resize()
        );
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
    ['üí≥ –û–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π', 'üè¶ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –°–ë–ü', 'üí∞ –û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –ÆMoney'].forEach(method => {
        bot.hears(method, async (ctx) => {
            // –ó–¥–µ—Å—å –ª–æ–≥–∏–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã
            const orderId = `ORDER_${Date.now()}_${ctx.from.id}`;
            // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø–ª–∞—Ç—ã
        });
    });
}; 